import{d as a,l as o,_ as e,q as t,C as s,r as i,t as l,c as n,e as r,w as u,j as c,i as d,n as g,v,D as _,u as f}from"./index.8765b610.js";import{b as h,c as p}from"./index.1c31cad1.js";import{u as m}from"./index.5b9738b1.js";import{_ as b}from"./_plugin-vue_export-helper.cdc0426e.js";const j={class:"container"},w={key:0,class:"loading"},k={key:1,class:"error"},x=b(a({__name:"PageOAuth",setup(a){var b;const x=o((()=>e((()=>import("./MainView.9b36954d.js")),["assets/MainView.9b36954d.js","assets/MainView.3b1a9b3d.css","assets/index.8765b610.js","assets/index.f9287388.css","assets/_plugin-vue_export-helper.cdc0426e.js"]))),y=t(),I=y.currentRoute.value,$=I.path.split("/").filter((a=>a))[1],q=null==(b=I.query.code)?void 0:b.toString(),A=s(!1);return async function(){if(!q)return void(A.value=!0);let a;try{"google"===$?a=await h(q,`${location.origin}/oauth/google/`):"facebook"===$?a=await p(`${q}#_=_`,`${location.origin}/oauth/facebook/`):A.value=!0}catch(o){A.value=!0}if(a){const o=m();o.setToken(a),await o.setUserInfo(),y.push("/")}}(),(a,o)=>{const e=i("Loading"),t=l("t");return n(),r(f(x),{id:"oauth"},{default:u((()=>[c("div",j,[A.value?_("",!0):(n(),d("div",w,[g(e,{active:!0,color:"#7b6ff6",width:100,height:100}),v(c("h1",null,null,512),[[t,"auth.login.loading"]])])),A.value?(n(),d("div",k,[v(c("h1",null,null,512),[[t,"auth.login.loginFailed"]]),v(c("p",null,null,512),[[t,"error.message"]])])):_("",!0)])])),_:1})}}}),[["__scopeId","data-v-3c6add6b"]]);export{x as default};
